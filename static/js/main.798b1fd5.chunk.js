(this["webpackJsonpreact-way-of-samurai"]=this["webpackJsonpreact-way-of-samurai"]||[]).push([[0],{120:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(216),u=n.n(c);t.a=function(){return r.a.createElement("div",{style:{backgroundColor:"white"}},r.a.createElement("img",{src:u.a}))}},121:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){if(!e)return"Field is required"}},167:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"c",(function(){return h})),n.d(t,"g",(function(){return b})),n.d(t,"e",(function(){return _})),n.d(t,"f",(function(){return S}));var a=n(9),r=n.n(a),c=n(18),u=n(79),i=n(10),o=n(76),s=n(17),l=function(e){return s.c.get("profile/"+e).then((function(e){return e.data}))},f=function(e){return s.c.get("profile/status/"+e).then((function(e){return e.data}))},d=function(e){return s.c.put("profile/status",{status:e}).then((function(e){return e.data}))},m=function(e){var t=new FormData;return t.append("image",e),s.c.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},p=function(e){return s.c.put("profile",e).then((function(e){return e.data}))},E={posts:[{id:1,message:"Hi, how are you?",likesCount:12},{id:2,message:"It's my first post",likesCount:11}],profile:null,status:""},g={addPostActionCreator:function(e){return{type:"SN/PROFILE/ADD-POST",newPostText:e}},setUserProfile:function(e){return{type:"SN/PROFILE/SET_USER_PROFILE",profile:e}},setStatus:function(e){return{type:"SN/PROFILE/SET_STATUS",status:e}},deletePost:function(e){return{type:"SN/PROFILE/DELETE_POST",postId:e}},savePhotoSuccess:function(e){return{type:"SN/PROFILE/SAVE_PHOTO_SUCCESS",photos:e}}},v=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(e);case 2:a=t.sent,n(g.setUserProfile(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e);case 2:a=t.sent,n(g.setStatus(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d(e);case 3:0===t.sent.resultCode&&n(g.setStatus(e)),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:0===(a=t.sent).resultCode&&n(g.savePhotoSuccess(a.data.photos));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n,a){var c,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a().auth.userId,t.next=3,p(e);case 3:if(0!==(u=t.sent).resultCode){t.next=12;break}if(null==c){t.next=9;break}n(v(c)),t.next=10;break;case 9:throw new Error("userId can't be null");case 10:t.next=14;break;case 12:return n(Object(o.a)("edit-profile",{_error:u.messages[0]})),t.abrupt("return",Promise.reject(u.messages[0]));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/PROFILE/ADD-POST":var n={id:5,message:t.newPostText,likesCount:0};return Object(i.a)({},e,{posts:[].concat(Object(u.a)(e.posts),[n])});case"SN/PROFILE/SET_STATUS":return Object(i.a)({},e,{status:t.status});case"SN/PROFILE/SET_USER_PROFILE":return Object(i.a)({},e,{profile:t.profile});case"SN/PROFILE/DELETE_POST":return Object(i.a)({},e,{posts:e.posts.filter((function(e){return e.id!=t.postId}))});case"SN/PROFILE/SAVE_PHOTO_SUCCESS":return Object(i.a)({},e,{profile:Object(i.a)({},e.profile,{photos:t.photos})});default:return e}}},17:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var a,r,c=n(215),u=n.n(c).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"a50a2025-9d97-4c32-b7bc-d9e7624fbc27"}});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(a||(a={})),function(e){e[e.CaptchaIsRequired=10]="CaptchaIsRequired"}(r||(r={}))},207:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(108),r=n(0),c=n.n(r),u=n(20),i=n(8),o=function(e){return{isAuth:e.auth.isAuth}};function s(e){return Object(i.b)(o,{})((function(t){var n=t.isAuth,r=Object(a.a)(t,["isAuth"]);return n?c.a.createElement(e,r):c.a.createElement(u.a,{to:"/login"})}))}},212:function(e,t,n){"use strict";n.d(t,"c",(function(){return C})),n.d(t,"d",(function(){return L})),n.d(t,"b",(function(){return A}));var a=n(9),r=n.n(a),c=n(18),u=n(79),i=n(10),o={"messages-received":[],"status-changed":[]},s=null,l=function(){E("pending"),setTimeout(g,3e3)},f=function(e){var t=JSON.parse(e.data);o["messages-received"].forEach((function(e){return e(t)}))},d=function(){E("ready")},m=function(){E("error"),console.error("REFRESH PAGE")},p=function(){var e,t,n,a;null===(e=s)||void 0===e||e.removeEventListener("close",l),null===(t=s)||void 0===t||t.removeEventListener("message",f),null===(n=s)||void 0===n||n.removeEventListener("open",d),null===(a=s)||void 0===a||a.removeEventListener("error",m)},E=function(e){o["status-changed"].forEach((function(t){return t(e)}))};function g(){var e;p(),null===(e=s)||void 0===e||e.close(),s=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),E("pending"),s.addEventListener("close",l),s.addEventListener("message",f),s.addEventListener("open",d),s.addEventListener("error",m)}var v=function(){g()},h=function(){var e;o["messages-received"]=[],o["status-changed"]=[],p(),null===(e=s)||void 0===e||e.close()},b=function(e,t){return o[e].push(t),function(){o[e]=o[e].filter((function(e){return e!==t}))}},_=function(e,t){o[e]=o[e].filter((function(e){return e!==t}))},S=function(e){var t;null===(t=s)||void 0===t||t.send(e)},O=n(417),w={messages:[],status:"pending"},j=function(e){return{type:"SN/chat/MESSAGES_RECEVIED",payload:{messages:e}}},N=function(e){return{type:"SN/chat/STATUS_CHANGED",payload:{status:e}}},y=null,P=function(e){return null===y&&(y=function(t){e(j(t))}),y},I=null,T=function(e){return null===I&&(I=function(t){e(N(t))}),I},C=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(),b("messages-received",P(t)),b("status-changed",T(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_("messages-received",P(t)),_("status-changed",T(t)),h();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},A=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:S(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/chat/MESSAGES_RECEVIED":return Object(i.a)({},e,{messages:[].concat(Object(u.a)(e.messages),Object(u.a)(t.payload.messages.map((function(e){return Object(i.a)({},e,{id:Object(O.a)()})})))).filter((function(e,t,n){return t>=n.length-100}))});case"SN/chat/STATUS_CHANGED":return Object(i.a)({},e,{status:t.payload.status});default:return e}}},216:function(e,t,n){e.exports=n.p+"static/media/preloader.6c3daf60.svg"},261:function(e,t,n){e.exports=n(411)},266:function(e,t,n){},267:function(e,t,n){},27:function(e,t,n){e.exports={wrapper:"dialogList_wrapper__1dOYt",wrapper__oneMes:"dialogList_wrapper__oneMes__33sBX",contt:"dialogList_contt__3osLV",mes:"dialogList_mes__JquP8",MYwrapper__oneMes:"dialogList_MYwrapper__oneMes__3nk7T",MYmes:"dialogList_MYmes__1DvWE",MYcontt:"dialogList_MYcontt__36dkt",field:"dialogList_field__gTzsI",but:"dialogList_but__1RhL7",con:"dialogList_con__2mieg",mainSpan:"dialogList_mainSpan__1lNkZ",thecSpan:"dialogList_thecSpan__1tTg0"}},38:function(e,t,n){e.exports={count:"dialogItem_count__3lK99",wrapper__Active:"dialogItem_wrapper__Active__37Kx_",name:"dialogItem_name__2QmSc",wrapper__time:"dialogItem_wrapper__time__JGsEI",date__user:"dialogItem_date__user__25GmI",wrapper__notActive:"dialogItem_wrapper__notActive__2psoT"}},411:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a=n(0),r=n.n(a),c=n(19),u=n.n(c),i=(n(266),n(169)),o=n(170),s=n(209),l=n(211),f=(n(267),n(268),n(30)),d=n(20),m=n(208),p=n(61),E=n(121),g=n(8),v=n(9),h=n.n(v),b=n(18),_=n(10),S=n(17),O=n(76),w=function(){return S.c.get("auth/me").then((function(e){return e.data}))},j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return S.c.post("auth/login",{email:e,password:t,rememberMe:n,captcha:a}).then((function(e){return e.data}))},N=function(){return S.c.delete("auth/login")},y=function(){return S.c.get("security/get-captcha-url").then((function(e){return e.data}))},P={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null},I=function(e,t,n,a){return{type:"SN/auth/SET_USER_DATA",payload:{userId:e,email:t,login:n,isAuth:a}}},T=function(e){return{type:"SN/auth/GET_CAPTCHA_URL_SUCCESS",payload:{captchaUrl:e}}},C=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t){var n,a,r,c,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:(n=e.sent).resultCode===S.b.Success&&(a=n.data,r=a.id,c=a.login,u=a.email,t(I(r,u,c,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:n=e.sent,a=n.url,t(T(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/auth/SET_USER_DATA":case"SN/auth/GET_CAPTCHA_URL_SUCCESS":return Object(_.a)({},e,{},t.payload);default:return e}},U=n(85),x=n.n(U),k=Object(m.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,a=e.captchaUrl;return r.a.createElement("form",{onSubmit:t},Object(p.c)("Email","email",[E.a],p.a),Object(p.c)("Password","password",[E.a],p.a,{type:"password"}),Object(p.c)(void 0,"rememberMe",[],p.a,{type:"checkbox"},"remember me"),a&&r.a.createElement("img",{src:a}),a&&Object(p.c)("Symbols from image","captcha",[E.a],p.a,{}),n&&r.a.createElement("div",{className:x.a.formSummaryError},n),r.a.createElement("div",null,r.a.createElement("button",null,"Login")))})),R=function(){var e=Object(g.d)((function(e){return e.auth.captchaUrl})),t=Object(g.d)((function(e){return e.auth.isAuth})),n=Object(g.c)();return t?r.a.createElement(d.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement(k,{onSubmit:function(e){var t,a,r,c;n((t=e.email,a=e.password,r=e.rememberMe,c=e.captcha,function(){var e=Object(b.a)(h.a.mark((function e(n){var u,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t,a,r,c);case 2:(u=e.sent).resultCode===S.b.Success?n(C()):(u.resultCode===S.a.CaptchaIsRequired&&n(L()),i=u.messages.length>0?u.messages[0]:"Some error",n(Object(O.a)("login",{_error:i})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},captchaUrl:e}),r.a.createElement("div",{className:x.a.test},"\u0414\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0442\u0435\u0441\u0442\u0430:",r.a.createElement("p",null,"Email: free@samuraijs.com"),r.a.createElement("p",null,"pass: free")))},F=n(16),M={initialized:!1},D=function(){return{type:"SN/APP/INITIALIZED_SUCCESS"}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/APP/INITIALIZED_SUCCESS":return Object(_.a)({},e,{initialized:!0});default:return e}},W=n(120),z=n(167),H=n(48),Y={},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;arguments.length>1&&arguments[1];return e},q=n(79),J=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(_.a)({},e,{},a):e}))},X={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return S.c.get("users?page=".concat(e,"&count=").concat(t,"&term=").concat(n)+(null===a?"":"&friend=".concat(a))).then((function(e){return e.data}))},follow:function(e){return S.c.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return S.c.delete("follow/".concat(e)).then((function(e){return e.data}))}},B={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[],filter:{term:"",friend:null}},Z=function(e){return{type:"SN/USERS/FOLLOW",userId:e}},K=function(e){return{type:"SN/USERS/UNFOLLOW",userId:e}},Q=function(e){return{type:"SN/USERS/SET_USERS",users:e}},$=function(e){return{type:"SN/USERS/SET_CURRENT_PAGE",currentPage:e}},ee=function(e){return{type:"SN/USERS/SET_FILTER",payload:e}},te=function(e){return{type:"SN/USERS/SET_TOTAL_USERS_COUNT",count:e}},ne=function(e){return{type:"SN/USERS/TOGGLE_IS_FETCHING",isFetching:e}},ae=function(e,t){return{type:"SN/USERS/TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},re=function(e,t,n){return function(){var a=Object(b.a)(h.a.mark((function a(r,c){var u;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(ne(!0)),r($(e)),r(ee(n)),a.next=5,X.getUsers(e,t,n.term,n.friend);case 5:u=a.sent,r(ne(!1)),r(Q(u.items)),r(te(u.totalCount));case 9:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},ce=function(){var e=Object(b.a)(h.a.mark((function e(t,n,a,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ae(!0,n)),e.next=3,a(n);case 3:0==e.sent.resultCode&&t(r(n)),t(ae(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/USERS/FOLLOW":return Object(_.a)({},e,{users:J(e.users,t.userId,"id",{followed:!0})});case"SN/USERS/UNFOLLOW":return Object(_.a)({},e,{users:J(e.users,t.userId,"id",{followed:!1})});case"SN/USERS/SET_USERS":return Object(_.a)({},e,{users:t.users});case"SN/USERS/SET_CURRENT_PAGE":return Object(_.a)({},e,{currentPage:t.currentPage});case"SN/USERS/SET_TOTAL_USERS_COUNT":return Object(_.a)({},e,{totalUsersCount:t.count});case"SN/USERS/TOGGLE_IS_FETCHING":return Object(_.a)({},e,{isFetching:t.isFetching});case"SN/USERS/SET_FILTER":return Object(_.a)({},e,{filter:t.payload});case"SN/USERS/TOGGLE_IS_FOLLOWING_PROGRESS":return Object(_.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(q.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},ie=n(217),oe=n(210),se=n(212),le=Object(F.c)({profilePage:z.b,dialogsPage:H.b,sidebar:V,usersPage:ue,auth:A,form:oe.a,app:G,chat:se.a}),fe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||F.d,de=Object(F.e)(le,fe(Object(F.a)(ie.a)));window.__store__=de;var me=de;function pe(e){return function(t){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement("div",null,"loading...")},r.a.createElement(e,t))}}var Ee=n(104),ge=Object(Ee.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),ve=function(e){return e.usersPage.pageSize},he=function(e){return e.usersPage.totalUsersCount},be=function(e){return e.usersPage.currentPage},_e=function(e){return e.usersPage.isFetching},Se=function(e){return e.usersPage.followingInProgress},Oe=function(e){return e.usersPage.filter},we=n(122),je=n(166),Ne=n(93),ye=n.n(Ne),Pe=n(5),Ie=n.n(Pe),Te=function(e){for(var t=e.totalItemsCount,n=e.pageSize,c=e.currentPage,u=void 0===c?1:c,i=e.onPageChanged,o=void 0===i?function(e){return e}:i,s=e.portionSize,l=void 0===s?9:s,f=Math.ceil(t/n),d=[],m=1;m<=f;m++)d.push(m);var p=Math.ceil(f/l),E=Object(a.useState)(1),g=Object(je.a)(E,2),v=g[0],h=g[1],b=(v-1)*l+1,_=v*l;return r.a.createElement("div",{className:Ie()(ye.a.paginator)},v>1&&r.a.createElement("button",{className:ye.a.find_button,onClick:function(){h(v-1)}},"PREV"),d.filter((function(e){return e>=b&&e<=_})).map((function(e){return r.a.createElement("span",{className:Ie()(Object(we.a)({},ye.a.selectedPage,u===e),ye.a.pageNumber),key:e,onClick:function(t){o(e)}},e)})),p>v&&r.a.createElement("button",{className:ye.a.find_button,onClick:function(){h(v+1)}},"NEXT"))},Ce=n(60),Le=n.n(Ce),Ae=n(78),Ue=n.n(Ae),xe=function(e){var t=e.user,n=e.followingInProgress,a=e.unfollow,c=e.follow;return r.a.createElement("div",{className:Le.a.user},r.a.createElement("span",null,r.a.createElement("div",null,r.a.createElement(f.c,{to:"/profile/"+t.id},r.a.createElement("img",{src:null!=t.photos.small?t.photos.small:Ue.a,className:Le.a.userPhoto}))),r.a.createElement("div",null,t.followed?r.a.createElement("button",{className:Le.a.find_button1,disabled:n.some((function(e){return e===t.id})),onClick:function(){a(t.id)}},"Unfollow"):r.a.createElement("button",{className:Le.a.find_button1,disabled:n.some((function(e){return e===t.id})),onClick:function(){c(t.id)}},"Follow"))),r.a.createElement("span",null,r.a.createElement("span",null,r.a.createElement("div",null,t.name),r.a.createElement("div",null,t.status)),r.a.createElement("span",null,r.a.createElement("div",null,"user.location.country"),r.a.createElement("div",null,"user.location.city"))))},ke=n(63),Re=function(e){return{}},Fe=r.a.memo((function(e){var t=Object(g.d)(Oe);return r.a.createElement("div",null,r.a.createElement(ke.c,{enableReinitialize:!0,initialValues:{term:t.term,friend:String(t.friend)},validate:Re,onSubmit:function(t,n){var a=n.setSubmitting,r={term:t.term,friend:"null"===t.friend?null:"true"===t.friend};e.onFilterChanged(r),a(!1)}},(function(e){var t=e.isSubmitting;return r.a.createElement(ke.b,{className:Le.a.friend_wrapper},r.a.createElement(ke.a,{className:Le.a.friendtype,type:"text",name:"term"}),r.a.createElement(ke.a,{className:Le.a.friend,name:"friend",as:"select"},r.a.createElement("option",{value:"null"},"All"),r.a.createElement("option",{value:"true"},"Only followed"),r.a.createElement("option",{value:"false"},"Only unfollowed")),r.a.createElement("button",{type:"submit",disabled:t,className:Le.a.find_button},"Find"))})))})),Me=n(159),De=function(e){var t=Object(g.d)(ge),n=Object(g.d)(he),c=Object(g.d)(be),u=Object(g.d)(ve),i=Object(g.d)(Oe),o=Object(g.d)(Se),s=Object(g.c)(),l=Object(d.g)();Object(a.useEffect)((function(){var e=Me.parse(l.location.search.substr(1)),t=c,n=i;switch(e.page&&(t=Number(e.page)),e.term&&(n=Object(_.a)({},n,{term:e.term})),e.friend){case"null":n=Object(_.a)({},n,{friend:null});break;case"true":n=Object(_.a)({},n,{friend:!0});break;case"false":n=Object(_.a)({},n,{friend:!1})}s(re(t,u,n))}),[]),Object(a.useEffect)((function(){var e={};i.term&&(e.term=i.term),null!==i.friend&&(e.friend=String(i.friend)),1!==c&&(e.page=String(c)),l.push({pathname:"/developers",search:Me.stringify(e)})}),[i,c]);var f=function(e){s(function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce(n,e,X.follow.bind(X),Z);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))},m=function(e){s(function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce(n,e,X.unfollow.bind(X),K);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))};return r.a.createElement("div",null,r.a.createElement(Fe,{onFilterChanged:function(e){s(re(1,u,e))}}),r.a.createElement(Te,{currentPage:c,onPageChanged:function(e){s(re(e,u,i))},totalItemsCount:n,pageSize:u}),r.a.createElement("div",null,t.map((function(e){return r.a.createElement(xe,{user:e,followingInProgress:o,key:e.id,unfollow:m,follow:f})}))))},Ge=function(e){var t=Object(g.d)(_e);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,e.pageTitle),t?r.a.createElement(W.a,null):null,r.a.createElement(De,null))},We=n(413),ze=n(416),He=n(420),Ye=n(421),Ve=n(422),qe=n(423),Je=n(418),Xe=n(419),Be=n(415),Ze=n(414),Ke=n(55),Qe=function(e){var t=Object(g.d)(Ke.b),n=Object(g.d)(Ke.a),a=Object(g.c)(),c=We.a.Header;return r.a.createElement(c,{className:"header"},r.a.createElement(Je.a,null,r.a.createElement(Xe.a,{span:18}),t?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(Xe.a,{span:1},r.a.createElement(Be.a,{alt:n||"",style:{backgroundColor:"#87d068"},icon:r.a.createElement(He.a,null)})),r.a.createElement(Xe.a,{span:5},r.a.createElement(Ze.a,{onClick:function(){a(function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:0===e.sent.data.resultCode&&t(I(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},"Log out"))):r.a.createElement(Xe.a,{span:6},r.a.createElement(Ze.a,null,r.a.createElement(f.b,{to:"/login"},"Login")))))},$e=Object(Ee.a)((function(e){return e.dialogsPage.dialogs}),(function(e){return e.filter((function(e){return!0}))})),et=Object(Ee.a)((function(e){return e.dialogsPage.messages.items}),(function(e){return e.filter((function(e){return!0}))})),tt=function(e){return e.dialogsPage.dialogsWith},nt=n(38),at=n.n(nt),rt=function(e){var t=e.hasNewMessages,n=Object(g.d)(Ke.b),a=Object(g.c)(),c=function(){if(!n)return r.a.createElement(d.a,{to:"/login"});a(Object(H.d)(e.id))};return!1===t?r.a.createElement(f.c,{onClick:c,to:"/dialogs/".concat(e.id,"/messages"),className:at.a.wrapper__notActive},r.a.createElement("div",{className:at.a.photo},r.a.createElement("img",{src:null!=e.smallPhoto?e.smallPhoto:Ue.a})),r.a.createElement("div",{className:at.a.name},e.userName),r.a.createElement("div",{className:at.a.wrapper__time},r.a.createElement("div",{className:at.a.date__dialog},"Last message:  ",e.lastDialogActivityDate),r.a.createElement("div",{className:at.a.date__user},"Was online:  ",e.lastUserActivityDate))):r.a.createElement(f.c,{onClick:c,to:"/dialogs/".concat(e.id,"/messages"),className:at.a.wrapper__Active},r.a.createElement("div",{className:at.a.photo},r.a.createElement("img",{src:null!=e.smallPhoto?e.smallPhoto:Ue.a})),r.a.createElement("div",{className:at.a.name},e.userName),r.a.createElement("div",{className:at.a.wrapper__time},r.a.createElement("div",{className:at.a.date__dialog},"Last message:  ",e.lastDialogActivityDate),r.a.createElement("div",{className:at.a.date__user},"Was online:  ",e.lastUserActivityDate)))},ct=function(e){var t=Object(g.d)($e),n=Object(g.c)(),c=Object(g.d)(Ke.b);return Object(a.useEffect)((function(){c&&n(Object(H.c)())}),[]),Object(g.d)(Ke.b)?r.a.createElement("div",null,r.a.createElement("div",null,t.map((function(e){return r.a.createElement(rt,{id:e.id,userName:e.userName,lastDialogActivityDate:e.lastDialogActivityDate,lastUserActivityDate:e.lastUserActivityDate,smallPhoto:e.photos.small,hasNewMessages:e.hasNewMessages})})))):r.a.createElement(d.a,{to:"/login"})},ut=function(e){var t=Object(g.d)($e),n=Object(g.c)(),c=Object(g.d)(Ke.b);Object(a.useEffect)((function(){c&&n(Object(H.c)())}),[]);var u=t.map((function(e){return e.newMessagesCount})),i=u[0];return Object(g.d)(Ke.b)?0===i?r.a.createElement(r.a.Fragment,null):r.a.createElement("span",{className:at.a.count},u):r.a.createElement(r.a.Fragment,null)},it=n(207),ot=Object(F.d)(Object(g.b)((function(e){return{dialogsPage:e.dialogsPage}}),Object(_.a)({},H.a)),it.a)(ct),st=n(27),lt=n.n(st),ft=function(e){var t=e.addedAt;return 21599===e.id||1079===e.id?r.a.createElement("div",{className:lt.a.MYwrapper__oneMes},r.a.createElement("div",{className:lt.a.MYcontt},r.a.createElement("div",{className:lt.a.MYdate},t.substring(0,10)),r.a.createElement("div",{className:lt.a.MYtime},t.substring(10))),r.a.createElement("div",{className:lt.a.MYmes},e.message)):r.a.createElement("div",{className:lt.a.wrapper__oneMes},r.a.createElement("div",{className:lt.a.mes},e.message),r.a.createElement("div",{className:lt.a.contt},r.a.createElement("div",{className:lt.a.date},t.substring(0,10)),r.a.createElement("div",{className:lt.a.time},t.substring(10))))},dt=function(e){return{}},mt=function(e){var t=Object(g.d)(et),n=Object(g.d)(tt);console.log(n);var a=Object(g.c)();return r.a.createElement("div",{className:lt.a.wrapper},r.a.createElement("div",{className:lt.a.con},r.a.createElement("span",{className:lt.a.thecSpan},"Dialog with:"),r.a.createElement("span",{className:lt.a.mainSpan},e.name),r.a.createElement("img",{src:null!=e.photo?e.photo:Ue.a})),r.a.createElement("div",{className:lt.a.wrapper__messages},t.map((function(e){return r.a.createElement(ft,{message:e.body,addedAt:e.addedAt,id:e.senderId})}))),r.a.createElement(ke.c,{initialValues:{message:""},validate:dt,onSubmit:function(e,t){var r=t.setSubmitting;a(Object(H.e)(n,e.message)),r(!1)},className:lt.a.formWrap},(function(e){var t=e.isSubmitting;return r.a.createElement(ke.b,null,r.a.createElement(ke.a,{className:lt.a.field,type:"text",name:"message"}),r.a.createElement("button",{className:lt.a.but,type:"submit",disabled:t},"Send"))})))},pt=function(){for(var e=Object(g.d)($e),t=Object(g.d)(tt),n=0;n<e.length;n++)if(e[n].id===t){var a=e.map((function(e){return e.photos.small})),c=e.map((function(e){return e.userName})),u=a[n],i=c[n];return r.a.createElement("div",null,r.a.createElement(mt,{name:i,photo:u}))}return r.a.createElement(r.a.Fragment,null)},Et=We.a.Content,gt=(We.a.Footer,We.a.Sider),vt=r.a.lazy((function(){return n.e(4).then(n.bind(null,428))})),ht=pe(r.a.lazy((function(){return n.e(3).then(n.bind(null,427))}))),bt=pe(vt),_t=function(e){Object(l.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).catchAllUnhandledErrors=function(e){alert("Some error occured")},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.initialized?r.a.createElement(We.a,null,r.a.createElement(Qe,null),r.a.createElement(Et,{style:{padding:"0 50px"}},r.a.createElement(We.a,{className:"site-layout-background",style:{padding:"24px 0"}},r.a.createElement(gt,{className:"site-layout-background",width:200},r.a.createElement(ze.a,{mode:"inline",style:{height:"100%"}},r.a.createElement(ze.a.Item,{key:"1",icon:r.a.createElement(He.a,null)}," ",r.a.createElement(f.b,{to:"/profile"},"Profile")),r.a.createElement(ze.a.Item,{key:"2",icon:r.a.createElement(Ye.a,null)}," ",r.a.createElement(f.b,{to:"/dialogs"},"Messages",r.a.createElement(ut,null))),r.a.createElement(ze.a.Item,{key:"3",icon:r.a.createElement(Ve.a,null)}," ",r.a.createElement(f.b,{to:"/developers"},"Developers")),r.a.createElement(ze.a.Item,{key:"4",icon:r.a.createElement(qe.a,null)},r.a.createElement(f.b,{to:"/chat"},"Publick Chat")))),r.a.createElement(Et,{style:{padding:"0 24px",minHeight:280}},r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/chat",render:function(){return r.a.createElement(bt,null)}}),r.a.createElement(d.b,{exact:!0,path:"/",render:function(){return r.a.createElement(d.a,{to:"/dialogs"})}}),r.a.createElement(d.b,{exact:!0,path:"/dialogs",render:function(){return r.a.createElement(ot,null)}}),r.a.createElement(d.b,{exact:!0,path:"/dialogs/:id?/messages",render:function(){return r.a.createElement(pt,null)}}),r.a.createElement(d.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(ht,null)}}),r.a.createElement(d.b,{path:"/developers",render:function(){return r.a.createElement(Ge,{pageTitle:"Developers"})}}),r.a.createElement(d.b,{path:"/login",render:function(){return r.a.createElement(R,null)}}),r.a.createElement(d.b,{path:"*",render:function(){return r.a.createElement("div",null,"404 NOT FOUND")}})))))):r.a.createElement(W.a,null)}}]),n}(a.Component),St=Object(F.d)(d.h,Object(g.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(C());Promise.all([t]).then((function(){e(D())}))}}}))(_t),Ot=function(){return r.a.createElement(f.a,{basename:"/soutialNET"},r.a.createElement(g.a,{store:me},r.a.createElement(St,null)))};u.a.render(r.a.createElement(Ot,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return v}));var a=n(9),r=n.n(a),c=n(18),u=n(10),i=n(17),o=function(){return i.c.get("dialogs").then((function(e){return e.data}))},s=function(e){return i.c.put("dialogs/".concat(e)).then((function(e){return e.data}))},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return i.c.get("dialogs/".concat(e,"/messages?page=").concat(t,"&count=").concat(n)).then((function(e){return e.data}))},f=function(e,t){return i.c.post("dialogs/".concat(e,"/messages"),{body:t}).then((function(e){return e.data}))},d={dialogs:[],messages:{items:[],totalCount:0,error:null},myMessages:"",dialogsWith:0},m={getDialogs:function(e){return{type:"GET-DIALOGS",dialogs:e}},getListOfMessage:function(e){return{type:"GET-LIST-OF-MESSAGE",messages:e}},sendMyMessage:function(e){return{type:"SEND-MESSAGE-TO-USER",myMessages:e}},setId:function(e){return{type:"SET-ID",dialogsWith:e}}},p=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:n=e.sent,t(m.getDialogs(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(e);case 2:a=t.sent,n(m.getListOfMessage(a)),n(m.setId(e));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a){var c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f(e,t);case 2:return a(m.sendMyMessage(t)),n.next=5,l(e);case 5:c=n.sent,a(m.getListOfMessage(c)),a(m.setId(e));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(e);case 2:return t.next=4,o();case 4:a=t.sent,n(m.getDialogs(a));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET-DIALOGS":return Object(u.a)({},e,{dialogs:t.dialogs});case"GET-LIST-OF-MESSAGE":return Object(u.a)({},e,{messages:t.messages});case"SEND-MESSAGE-TO-USER":return Object(u.a)({},e,{myMessages:t.myMessages});case"SET-ID":return Object(u.a)({},e,{dialogsWith:t.dialogsWith});default:return e}}},55:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var a=function(e){return e.auth.isAuth},r=function(e){return e.auth.login}},60:function(e,t,n){e.exports={userPhoto:"users_userPhoto__3HrWw",find_button:"users_find_button__1AJck",find_button1:"users_find_button1__1a2Ck",friend_wrapper:"users_friend_wrapper__1FXhj",user:"users_user__312fn"}},61:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return d}));var a=n(108),r=n(0),c=n.n(r),u=n(85),i=n.n(u),o=n(152),s=function(e){var t=e.meta,n=t.touched,a=t.error,r=e.children,u=n&&a;return c.a.createElement("div",{className:i.a.formControl+" "+(u?i.a.error:"")},c.a.createElement("div",null,r),u&&c.a.createElement("span",null,a))},l=function(e){var t=e.input,n=(e.meta,Object(a.a)(e,["input","meta"]));return c.a.createElement(s,e,c.a.createElement("textarea",Object.assign({},t,n)))},f=function(e){var t=e.input,n=(e.meta,Object(a.a)(e,["input","meta"]));return c.a.createElement(s,e,c.a.createElement("input",Object.assign({},t,n)))};function d(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return c.a.createElement("div",null,c.a.createElement(o.a,Object.assign({placeholder:e,name:t,validate:n,component:a},r))," ",u)}},78:function(e,t,n){e.exports=n.p+"static/media/user.8b1dbb1f.png"},85:function(e,t,n){e.exports={formControl:"FormsControls_formControl__25dAZ",error:"FormsControls_error__1a6rG",formSummaryError:"FormsControls_formSummaryError__zibNR",test:"FormsControls_test__1A0U6"}},93:function(e,t,n){e.exports={paginator:"Paginator_paginator__x_SFu",pageNumber:"Paginator_pageNumber__5zUsR",selectedPage:"Paginator_selectedPage__oNbwB",find_button:"Paginator_find_button__1q2P5"}}},[[261,1,2]]]);
//# sourceMappingURL=main.798b1fd5.chunk.js.map